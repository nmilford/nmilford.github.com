
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>blog.milford.io</title>
  <meta name="author" content="Nathan Milford">

  
  <meta name="description" content="Finally upgraded to Chef 0.10.6 from 0.9.8. Hot, sweet, environments and encrypted data bag action. Except&#8230; well&#8230; the chef-client would &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://code.milford.io/page/2/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="blog.milford.io" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">blog.milford.io</a></h1>
  
    <h2>a personal knowledge dump.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:code.milford.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/cassandra-token-calculator">Cassandra Token Calculator</a></li>
  <li><a href="/about">About</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2012/03/the-joy-of-the-opscode-chef-omnibus-installer/">The Joy of the Opscode Chef Omnibus Installer.</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-14T21:03:18-04:00" pubdate data-updated="true">Mar 14<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img class="right" src="/images/angry_chef.jpg"></p>

<p>Finally upgraded to <a href="http://www.opscode.com/chef/">Chef</a> 0.10.6 from 0.9.8.</p>

<p>Hot, sweet, <a href="http://wiki.opscode.com/display/chef/Environments">environments</a> and <a href="http://wiki.opscode.com/display/chef/Encrypted+Data+Bags">encrypted data bag</a> action.</p>

<p>Except&#8230; well&#8230; the chef-client would ocassionally die&#8230; quetly.</p>

<p>No log, no debug output, no exit codes, just poof&#8230; no more chef-client daemon.</p>

<p>(This is not the point there you guys tell me I should use cron or runit or daemontools or something to run chef, I&#8217;ve heard it)</p>

<p>The lovely folks at <a href="http://www.opscode.com/">Opscode</a> said that running on ruby 1.8.7 rather than ruby 1.9.2 was the culprit and then drew my attention to the super-happy-awesome Opscode Chef <a href="http://lists.opscode.com/sympa/arc/chef-dev/2011-08/msg00055.html">Omnibus</a> installer <a href="http://www.opscode.com/chef/install/">here</a> (avaliable as rpms, debs, tgz, etc..)</p>

<p>It installs (almost) everything you need into /opt and lets Chef run in it&#8217;s own &#8216;embedded&#8217; ruby 1.9.2 environment keeping my system ruby clean.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/2012/03/the-joy-of-the-opscode-chef-omnibus-installer/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2012/02/stop-mysqlhammerofthor-py-time/">Stop! mysqlHammerOfThor.py Time!</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-02-01T21:39:49-05:00" pubdate data-updated="true">Feb 1<span>st</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img class="center" src="/images/hammertime.jpg"></p>

<p>So, expanding upon my <a href="http://blog.milford.io/2012/01/i-wield-the-mysql-hammer-of-zeus-mass-killing-queries-by-host/">previous post</a>, I wrote a simple python script that would kill all queries running on a MySQL instance based on a host wildcard or runtime of a query.</p>

<p>Yes, yes, I know about <a href="http://www.maatkit.org/doc/mk-kill.html">mk-kill</a>, but I enjoy writing little scripts.  Writing trivial scripts is always a great way to get better. :)</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/2012/02/stop-mysqlhammerofthor-py-time/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2012/01/i-wield-the-mysql-hammer-of-zeus-mass-killing-queries-by-host/">I Wield the MySQL Hammer of Thor! Mass Killing Queries by Host.</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-01-30T17:57:56-05:00" pubdate data-updated="true">Jan 30<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img class="center" src="/images/thor.jpg"></p>

<p>Just a quick protip.  I&#8217;m not a DBA, but I&#8217;m about to whack you with the clue hammer.</p>

<p>I had an errant application node hammering a MySQL slave with metric butt loads (engineering term) of junk queries that were locking the slave up.</p>

<p>If you find yourself in a similar position without your own surly DBA around, I&#8217;ll save 20 minutes of googling:</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/2012/01/i-wield-the-mysql-hammer-of-zeus-mass-killing-queries-by-host/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2012/01/automating-some-cassandra-maintenance/">Automating Some Cassandra Maintenance</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-01-29T22:55:39-05:00" pubdate data-updated="true">Jan 29<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img class="center" src="/images//MaintenanceMania.gif"></p>

<p>Lets talk about Cassandra maintenance.</p>

<p>Nothing crazy here&#8230; these are just some notes I jotted down for folks I work with explaining a cronjob I put into production as well as providing the simple script.  Thought some other people might benefit.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/2012/01/automating-some-cassandra-maintenance/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2012/01/in-which-i-give-a-server-to-some-kids/">In Which I Give a Server to Some Kids.</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-01-29T21:08:44-05:00" pubdate data-updated="true">Jan 29<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img class="right" src="/images/funny-celebrity-pictures-i-believe-the-children-are-our-future-not-these-better-ones.jpg"></p>

<p>So, I am at one of my data centers late last Friday night bringing up some new Hadoop nodes when I look up to see <a href="atlanticmetro.ne">Atlantic Metro</a>&#8217;s eminent &#8216;head cheese of facilities&#8217; <a href="https://twitter.com/ckvibes">Christian</a> walk by at the lead of a crew of 3 kids and their parents carrying a little 1U server.</p>

<p>Odd, I thought, so I asked Christian what they were doing.  These kids were racking thier first server. They are starting a game company!</p>

<p>How cool is that!?! How cool are these kids!?!  How fantastic are these kid&#8217;s parents?!</p>

<p>Here I am, impressed as hell by these short entrepreneurs, sitting next to a stack of 4 year old servers that we&#8217;ve recently decommissioned and I&#8217;ve freshly wiped.  We still haven&#8217;t figured out what to do with them, where to donate them, since their resell value is ~3-5% of their original purchase price and I&#8217;m too lazy to put them up on eBay for the company only to have the company make ~$100 bucks for my time.</p>

<p>So, I asked them if they wanted a server.</p>

<p>They did.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/2012/01/in-which-i-give-a-server-to-some-kids/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2012/01/adjust-your-slab-memcached-1-4-11-rpms-on-centos-5-7/">Adjust Your Slab! Memcached 1.4.12 RPMs on CentOS 5.7.</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-01-28T15:29:25-05:00" pubdate data-updated="true">Jan 28<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img class="right" src="/images/memcached-logo-500x380-300x228.png"></p>

<p>So, memcached 1.4.11 lets you rebalance and reassign slab memory!</p>

<p>This is epic!</p>

<p>Info why this is epic <a href="http://freetofeel.com/2010/12/29/memcached-slabs.html">here</a>.</p>

<p>Info on the implementation is in the <a href="http://code.google.com/p/memcached/wiki/ReleaseNotes1411">release notes</a></p>

<p>From the release notes, please remember that the slab reassignment feature is in beta and is subject to some changes.</p>

<p>I just took the regular spec file I found for the project elsewhere and modified it a little. I disabled the SASL stuff in my spec file since we don&#8217;t use it and I didn&#8217;t want to mess with building it.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/2012/01/adjust-your-slab-memcached-1-4-11-rpms-on-centos-5-7/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2012/01/kicking-the-tires-on-hadoop-0-23-pseudo-distributed-mode/">Kicking the Tires on Hadoop 0.23: Pseudo-Distributed Mode.</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-01-10T01:04:22-05:00" pubdate data-updated="true">Jan 10<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img class="right" src="/images/Depressed-Elephant.jpg"></p>

<p>Thought I’d play a little with Hadoop 0.23 (a.k.a YARN, MR2, NextGen Hadoop) and dump my notes here.</p>

<p>Gotta keep my skillz sharp y’all so I don’t become irrelephant. (Yes, that just happened.)</p>

<p>Below I just setup a pseudo-distributed mode setup and run some examples on it, nothing crazy.</p>

<p>I’m hoping to test and write more on how <a href="http://hadoop.apache.org/common/docs/r0.23.0/hadoop-project-dist/hadoop-common/releasenotes.html">0.23</a> differs from the main line <a href="http://hadoop.apache.org/common/docs/r0.20.205.0/releasenotes.html">0.20.x</a>, <a href="http://hadoop.apache.org/common/docs/r1.0.0/releasenotes.html">1.0</a> and <a href="https://ccp.cloudera.com/display/CDHDOC/CDH3+Release+Notes">CDH3</a> releases as well as playing with the <a href="http://hadoop.apache.org/common/docs/r0.23.0/hadoop-yarn/hadoop-yarn-site/Federation.html">NameNode federation</a> and using some other paradigms like <a href="http://www.open-mpi.org/">MPI</a>, <a href="http://incubator.apache.org/hama/">Hama</a> and <a href="https://github.com/mesos/spark-yarn/">Spark</a>.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/2012/01/kicking-the-tires-on-hadoop-0-23-pseudo-distributed-mode/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2012/01/code-example-linux-pyusb-the-dream-cheeky-thunderstorm-usb-missile-launcher/">Code Example: Linux + PyUSB & the Dream Cheeky Thunder/Storm USB Missile Launcher</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-01-07T12:06:57-05:00" pubdate data-updated="true">Jan 7<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img class="left" src="/images/cheeky.jpg"></p>

<p>Went to Staples the other day to grab some assorted accessories for work and I saw they had some <a href="http://www.brookstone.com/usb-desktop-missile-launcher">Brookstone USB Desktop Missile Launchers</a> in the clearence section, so I grabbed one.</p>

<p><em>What fun</em>, I thought. Plugged it into my work desktop (running <a href="http://www.linuxmint.com/download_lmde.php">LinuxMint Debian Edition</a>) only to find there were no linux drivers for this particular device.</p>

<p>This turned into a nice little weekend project :)</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/2012/01/code-example-linux-pyusb-the-dream-cheeky-thunderstorm-usb-missile-launcher/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2012/01/building-and-installing-python-2-7-rpms-on-centos-5-7/">Building and Installing Python 2.7 RPMs on CentOS 5.7</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-01-04T21:48:03-05:00" pubdate data-updated="true">Jan 4<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img class="right" src="/images/macbook.png"></p>

<p>I was asked today to install Python 2.7 on a CentOS based node and I thought I&#8217;d take this oportunity to add a companion article to my <a href="http://blog.milford.io/2010/08/new-method-for-installing-python-2-6-4-with-mysql-python-on-centos-5-5/">Python 2.6 article</a>.</p>

<p>We&#8217;re all well aware that CentOS is pretty backwards when it comes to having the latest and greatest sotware packages and is particularly finicky when it comes to Python since so much of RHEL depends on it.</p>

<p>As a rule, I refuse to rush in and install anything in production that isn&#8217;t in a manageable package format such as RPM. I need to be able to predictably reproduce software installs across a large number of nodes.</p>

<p>The following steps will not clobber your default Python 2.4 install and will keep both CentOS and your developers happy.</p>

<p>So, here we go.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/2012/01/building-and-installing-python-2-7-rpms-on-centos-5-7/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2012/01/cassandra-nyc-2011-talk-on-youtube/">Cassandra NYC 2011 Talk on YouTube</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-01-04T00:53:35-05:00" pubdate data-updated="true">Jan 4<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img class="center" src="/images/CassNYC.png"></p>

<p><a href="http://www.datastax.com">Datastax</a> posted my talk (see below)!</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/2012/01/cassandra-nyc-2011-talk-on-youtube/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/page/3/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2012/03/getting-a-basic-cobbler-server-going-on-centos/">Getting a Basic Cobbler server going on CentOS.</a>
      </li>
    
      <li class="post">
        <a href="/2012/03/making-a-local-centos-mirror/">Making a local CentOS mirror.</a>
      </li>
    
      <li class="post">
        <a href="/2012/03/making-a-simple-yum-repository/">Making a simple Yum repository.</a>
      </li>
    
      <li class="post">
        <a href="/2012/03/now-hiring-now-right-now-were-hiring-now/">Now Hiring Now, Right Now We&#8217;re Hiring Now.</a>
      </li>
    
      <li class="post">
        <a href="/2012/03/the-dell-c6220-and-an-ode-to-my-dell-dcs-team/">The Dell C6220 and an Ode to my Dell DCS Team.</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Tag Cloud</h1>
    <span id="tag-cloud"></span>
</section>

<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("NathanMilford", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/NathanMilford" class="twitter-follow-button" data-show-count="false">Follow @NathanMilford</a>
  
</section>


<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/nmilford">@nmilford</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'nmilford',
            count: 6,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Coderwall</h1>
  <ul id="cw_badges">
    <li class="loading">Status updating&#8230;</li>
  </ul>

  <script type="text/javascript">
    var coderwall = (function(){
      function render(options, badges){
        var fragment = '',
            t = $(options.target)[0],
            height = 65,
            width = 65,
            index;

        for (index in badges) {
          fragment += '<a class="cw_badge"title="' + badges[index].description + '" href="http://coderwall.com/' + options.user + '">';
          fragment +=   '<img alt="' + badges[index].description + '" height="' + width + '" width="' + height + '" src="' + badges[index].badge + '"/>';
          fragment += '</a>';
        }

        t.innerHTML = fragment;
      }
      return {
        showBadges: function(options){
          $.ajax({
              url: 'http://coderwall.com/' + options.user + '.json?callback=?'
            , type: 'jsonp'
            , error: function (err) { $(options.target + ' li.loading').addClass('error').text("Error loading feed"); }
            , success: function(res) {
                render(options, res.data.badges);
            }
          });
        }
      };
    })();

    $.domReady(function(){
      if (!window.jXHR){
        var jxhr = document.createElement('script');
        jxhr.type = 'text/javascript';
        jxhr.src = '/javascripts/libs/jXHR.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(jxhr, s);
      }
      if (!window.$){
        var b = document.createElement('script');
        b.type = 'text/javascript';
        b.src = '/javascripts/ender.js';
        var sc = document.getElementsByTagName('script')[0];
        sc.parentNode.insertBefore(jxhr, s);
      }
      coderwall.showBadges({
        user: 'nmilford',
        target: '#cw_badges'
      });
    });
  </script>
  <style type="text/css">
    .cw_badge img {
      padding: 5px;
      border: 0 none !important;
      -moz-box-shadow: none !important;
      -webkit-box-shadow: none !important;
      -o-box-shadow: none !important;
      box-shadow: none !important;
    }
  </style>
</section>


  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Nathan Milford -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>


<input type="hidden" name="OBKey" value=''/> 
<script LANGUAGE="JavaScript">
var OBCTm='';
</script>
<script LANGUAGE="JavaScript" src="http://widgets.outbrain.com/claim.js"></script>


</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'code-milford-io';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>









  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
